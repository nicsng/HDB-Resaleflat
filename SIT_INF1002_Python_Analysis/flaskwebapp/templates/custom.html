<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>View Graph Charts</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css" />
        <script defer="" src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&amp;display=swap" rel="stylesheet" />
        <link type="text/css" href="{{ url_for('static',filename='css/styles.css') }}" rel="stylesheet" />
        <script src="{{ url_for('static',filename='js/script.js') }}"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        
    </head>

    <body>
        <div class="pagecontainer">
            <div class="header-container">
                <div class="navdiv">
                    <div class="header-title-div">
                        <div class="header-div">
                            <p class="header-title">GUI</p>
                        </div>
                    </div>
                    <div class="tab-section">
                        <div class="home-tab-container">
                            <div class="home-btn-div">
                                <a href="/" class="home-tab">
                                    Home
                                </a>
                            </div>
                        </div>
                        <div class="viewds-tab-container">
                            <div class="viewds-btn-div">
                                <a href="datasets" class="viewds-tab">
                                    View Datasets
                                </a>
                            </div>
                        </div>
                        <div class="custom-tab-container">
                            <div class="custom-btn-div">
                                <a href="custom" class="customtab">
                                    Custom Table
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="body-container">
                <div class="body-div">
                    <div class="body-top-div">
                        <div class="body-title-div">
                            <p class="body-title">Custom Dynamic Table</p>
                        </div>
                        <div class="body-subtitle-div">
                            <p class="body-subtitle">
                                This page contains a custom chart, allowing users to select the chart format and an independent variable for the x-axis.
                            </p>
                        </div>
                    </div>
                    <div class="body-chartsection">
                        <div class="graphbodydiv" id="graphone">
                                    
                            <div class="chartdiv">
                                <div class="chart" id="chartxxl">
                                </div>
                            </div>

                            <div class="charttxtdiv">

                                <div class="chartdescdiv">
                                    <p class="chartdesc">
                                        <span class="chartspan">Description: </span>Interactive Graphs
                                    </p>

                                    <p class="chartdesc">
                                        Allow users to conduct their own analysis and conclusion with the implemented graphs and variables 
                                    </p>

                                    <p class="chartdesc">
                                        Drop down feature to select Graphs ‘Bar Chart’, ‘ Scatter Plot’, ‘Pie Chart’ or ‘Line Chart’

                                    <p class="chartdesc">
                                        Drop down feature to select variables ‘Town’, ‘Month’, Storey’ Flat Type’,’Floor area sqm’,’Flat Model’ and ‘Remaining Lease’
                                    </p>
                                </div>

                                <div class="chartfiltdiv">
                                    <p class="chartfilt">
                                        <span class="chartspan">Data Filter: </span>town’, ‘month’, storey_range’ flat_type’,’floor area sqm’,’flat model’ and ‘remaining_lease’ to Resale hdb price(Average)
                                    </p>
                                </div>

                                <div class="chartformatdiv">
                                    <p class="chartformat">
                                        <span class="chartspan">Format: </span> ‘Bar Chart’, ‘ Scatter Plot’, ‘Pie Chart’ or ‘Line Chart’
                                    </p>
                                </div>

                                <div class="chartremarkdiv">
                                    <p class="chartremark">
                                        <span class="chartspan">Remarks: </span>Created a data filter to find the average hdb resale price in each variable.
                                    </p>
                                </div>


                            </div>

                        </div>

                    </div>
                </div>

            </div>
        </div>

        <div class="loadingmodaldiv" id="loadingPopUp">
            <div class="loadingmodal" id="loadingModal">
                <div class="modal-body">
                    <!-- <div class="modal-closediv">
                        <span class="modalclose">
                            &times;
                        </span>
                    </div> -->
                    <div class="modal-titlediv">
                        <p class="loadingtitle">
                            Loading
                        </p>
                    </div>
                    <div class="loadingspinnerdiv">
                        <div class="spinner-border">

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </body>
    <script type='text/javascript'>

        function plotGraphs(){

            var graphxxl = {{graphXXLJSON | safe}};
            Plotly.plot('chartxxl',graphxxl,{});
        
            return true;
        }

        async function loading(){
            loadingmodal = document.getElementById("loadingPopUp");
            flag = await plotGraphs()
            if(flag){
                loadingmodal.style.display = "none";
            }
        }

        loading()

    </script>
</html>